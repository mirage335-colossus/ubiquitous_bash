export netName=default

export sshBase="$HOME"/.ssh
_prepare_ssh

#Example only.
_here_ssh_config() {
	cat << CZXWXcRMTo8EmM8i4d

Host *-$netName
	Compression yes
	ExitOnForwardFailure yes
	ConnectTimeout 72
	ConnectionAttempts 1
	ServerAliveInterval 5
	ServerAliveCountMax 5
	#PubkeyAuthentication yes
	#PasswordAuthentication no
	StrictHostKeyChecking no
	UserKnownHostsFile "$sshDir/known_hosts"
	IdentityFile "$sshDir/id_rsa"
	
	Cipher aes256-gcm@openssh.com
	Ciphers aes256-gcm@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,arcfour256,arcfour128,aes128-gcm@openssh.com,chacha20-poly1305@openssh.com,aes128-cbc,3des-cbc,blowfish-cbc,cast128-cbc,aes192-cbc,aes256-cbc,arcfour

Host machine-$netName
	User user
	ProxyCommand "$sshDir/cautossh" _ssh_proxy_machine-$netName


CZXWXcRMTo8EmM8i4d
}


_ssh_proxy_machine-default() {
	_start
	
	_proxy machine-default 2222
	
	_proxy machine-default 22
	
	_proxy_reverse machine machine.domain.tld
	
	_proxySSH gateway-default 20009
	
	_proxySSH_reverse gateway-default
	
	_proxyTor_reverse machine address.onion
	
	_stop
}

_ssh_autoreverse() {
	_torServer_SSH
	_autossh
	
	#_autossh firstGateway
	#_autossh secondGateway
}

#Consider placing files like ' _vnc-machine-"$netName" ' in an "_index" folder for automatic installation.
_setupCommands() {
	#find . -name '_command' -exec "$scriptAbsoluteLocation" _setupCommand {} \;
	find . -name '_vnc' -exec "$scriptAbsoluteLocation" _setupCommand {} \;
	find . -name '_ssh' -exec "$scriptAbsoluteLocation" _setupCommand {} \;
	find . -name '_wake' -exec "$scriptAbsoluteLocation" _setupCommand {} \;
	find . -name '_fs' -exec "$scriptAbsoluteLocation" _setupCommand {} \;
}

#Hooks "_setup" before "_setup_ssh" . Use to install extra files (eg. machine specific SSH keys).
_setup_pre() {
	true
}

#Hooks "_setup" after "_setup_ssh" .
_setup_prog() {
	true
}
