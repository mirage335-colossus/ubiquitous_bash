#!/usr/bin/env bash
[[ "$PATH" != *"/usr/local/bin"* ]] && [[ -e "/usr/local/bin" ]] && export PATH=/usr/local/bin:"$PATH"
[[ "$PATH" != *"/usr/bin"* ]] && [[ -e "/usr/bin" ]] && export PATH=/usr/bin:"$PATH"
[[ "$PATH" != *"/bin:"* ]] && [[ -e "/bin" ]] && export PATH=/bin:"$PATH"
#_compressedScript_uk4uPhB663kVcygT0q_compressedScript_uk4uPhB663kVcygT0q_compressedScript_uk4uPhB663kVcygT0q_compressedScript
export ub_setScriptChecksum_disable="true"
current_internal_CompressedScript_bytes='16787'
current_internal_CompressedScript_cksum='2761544884'
current_internal_CompressedScript='
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'
current_internal_compressedScript_headerFunctions='
/Td6WFoAAATm1rRGAgAhARwAAAAQz1jM4CsHA1pdAC+ciKYksL89qRi90TdMvSwSEM6J8ipM2rR/Iqc/oYbShD5P+hKgz3ONSu7BhrUf8OSN4oZ8BL1e7m0JQ33pEQs007VTHA7nLczyIuWiilZSo+0zB132
DrV189uAlZ6oqD3MK7bjrSmuGreEaBOC+z5QkGUPIDVaXfJmDg73/A1Y9JqRKxtli7ZDurfX2t/Z3m6RV6ku3LwPHl2qt8/kbWEubRkY3Fl2VTTFWjQ8Z9qfpBK4YyV7fw3X3hcUmN6Fz+u2P8eCSl/fCnNX
HtvGeiwoJbZ3wje2iPvqVhHoy0BMVkEDcSqWo+znkV0BwqE45qLsZQ9IGG1CzglgciwcOU2fdsqKBFC5XA3WYFGg6uZ2q4mvn5jWR+FbeUz7YjupLAvLl7DE+daOBWzzyYeFrcMhDk1QeqOKpv41V0GTTqAm
Z7lRbPrhk3oRY/kBiQGZSfRuxTSmIc1zevrFy6JWcZkCJayU/wQ+XEKdvF51XHH+OYrSuhIxvk6G+Ce0sbTr3GBfVRQYdRpxeOs48xNaEfmBf6GZcWUMx5L3LA4cup19vL4O75JjKbnlJeYdoRCjtcPE7A8S
82KbKVXWm5n1ADflKsnTX3CVTSu7uS4pVXHlludUnC/0dCPIaO2WxpZTXETnBW0SD0f3HTs7UDEzwk7eMHnoe3xk/cdsh16yyG0jPOBLHEqULsotf/cimpgvkZlFxPNFKvrB2sVBDpjr393u8l5sSqQ9L5Vr
QgGi6nBnxhDESgC1fQ6p4D6w2joYaBQzVX0ShFGEK+bvZ6VjUbYJlLF4gx2eezXDlEClVs6t/VpATWVe263gsdVgRirp4aPGEtCnMOl6oAU3laA3KDdlQbcC906c44adhj8dQ6w5GG1zEy5jv73Q/CBnpuh4
6Q2uqurIYFG/4bzAesrLfJaMbHC5QEx2yRFLlLaXzwYBqGzW1kQN1LZUOdFDF746w4C4eMXwHmuiAdpwV2muM75Gv4UeLCX8pXZlUOuUnruNLaDG9Tq1m+cWA1lXHyWJ4wB4kyv4KtgYXHsQL1t6bC8gD9ly
TvtNA8FiEDaU4PeofKVcYpu+2JSbjM6pr/bbQKOmEr2szDpnOSz/0dZivx9HodtgWaii7I0ZRCSi9eNbuNfa+H7BpKNBHwAAADfa2eLaotFaAAH2BohWAACvFwLPscRn+wIAAAAABFla'
! echo "$current_internal_compressedScript_headerFunctions" | base64 -d | xz -d > /dev/null && exit 1
	source <(echo "$current_internal_compressedScript_headerFunctions" | base64 -d | xz -d)
export importScriptLocation=$(_getScriptAbsoluteLocation)
export importScriptFolder=$(_getScriptAbsoluteFolder)
! type readlink > /dev/null 2>&1 && exit 1;
! type dirname > /dev/null 2>&1 && exit 1;
! type basename > /dev/null 2>&1 && exit 1;
! readlink -f . > /dev/null 2>&1 && exit 1;
[[ "$1" == "--profile" ]] && ( [[ rotten == "rotten"* ]] || [[ rotten == "rotten" ]] ) && export ub_import="true" && export importScriptLocation="$profileScriptLocation" && export importScriptFolder="$profileScriptFolder"
[[ "$importScriptLocation" == "" ]] && exit 1
[[ "$importScriptFolder" == "" ]] && exit 1
! _getAbsolute_criticalDep && exit 1
! _compressed_criticalDep && exit 1
! echo "$current_internal_CompressedScript" | base64 -d | xz -d > /dev/null && exit 1
if [[ "$1" == "--embed" ]]
then
	source <(echo "$current_internal_CompressedScript" | base64 -d | xz -d) "$@"
	internalFunctionExitStatus="$?"
	return "$internalFunctionExitStatus" > /dev/null 2>&1
	exit "$internalFunctionExitStatus"
elif [[ "$1" == "--profile" ]] || [[ "$1" == "--parent" ]]
then
	source <(echo "$current_internal_CompressedScript" | base64 -d | xz -d) "$@"
else
	source <(echo "$current_internal_CompressedScript" | base64 -d | xz -d) --compressed "$@"
	ub_import=
	ub_import_param=
	ub_import_script=
	ub_loginshell=
fi
if [[ "$ub_import" == "true" ]] && ! ( [[ "$ub_import_param" == "--bypass" ]] ) || [[ "$ub_import_param" == "--compressed" ]] || [[ "$ub_import_param" == "--parent" ]] || [[ "$ub_import_param" == "--profile" ]]
then
	if [[ "$ubiquitousBashID" != "" ]] || [[ -e "$HOME"/.ubcore ]] || ( [[ rotten != "rotten"* ]] || [[ rotten != "rotten" ]] )
	then
		return 0 > /dev/null 2>&1
		exit 0
	fi
fi
unset current_internal_CompressedScript ; unset current_internal_CompressedScript_cksum ; unset current_internal_CompressedScript_bytes
export ub_setScriptChecksum_disable=
unset ub_setScriptChecksum_disable
true
# https://github.com/mirage335/ubiquitous_bash
#_compressedScript_uk4uPhB663kVcygT0q_compressedScript_uk4uPhB663kVcygT0q_compressedScript_uk4uPhB663kVcygT0q_compressedScript






#####Entry
# ###



_here_rottenScript_bash_declareFunctions() {
	#declare -f _here_rottenScript_bash_declareFunctions
	#declare -f _here_rottenScript_bash_compressedFunctions
	#declare -f _here_rottenScript_bash
	#declare -f _write_rottenScript_bash
	#declare -f _indent_base64
	#declare -f _here_rottenScript_cloudConfig
	#declare -f _write_rottenScript_cloudConfig
	declare -f _enter
	declare -f _custom_core_fetch
	declare -f _custom_core
	declare -f _custom_core_drop
	declare -f _custom_kde
	declare -f _custom_kde_drop
	declare -f _custom_kde-limited
	declare -f _custom_kde_drop-limited
	declare -f _custom_kernel_sequence
	declare -f _custom_kernel
	declare -f _custom_bootOnce
	declare -f _here_opensslConfig
	declare -f _custom_splice_opensslConfig
	declare -f _custom_write_sshdConfig
	declare -f _custom_write_sudoers
	declare -f _custom_construct_permissions_user
	declare -f _custom_construct_user
	declare -f _custom
	declare -f _install_and_run_package
	declare -f _install
	declare -f _install_and_run
	declare -f _regenerate_docker
	declare -f _regenerate
	declare -f _run
	declare -f _test_prog
	declare -f _main
}

_here_rottenScript_bash_compressedFunctions() {
	local current_internal_CompressedFunctions
	current_internal_CompressedFunctions=$(_here_rottenScript_bash_declareFunctions | xz -z -e9 -C crc64 --threads=1 | base64 -w 156 | fold -w 156 -s)
	local current_internal_CompressedFunctions_cksum
	current_internal_CompressedFunctions_cksum=$(echo "$current_internal_CompressedFunctions" | env CMD_ENV=xpg4 cksum | cut -f1 -d\  | tr -dc '0-9')
	local current_internal_CompressedFunctions_bytes
	current_internal_CompressedFunctions_bytes=$(echo "$current_internal_CompressedFunctions" | wc -c | tr -dc '0-9')
	
	echo '#compressedFunctions_uk4uPhB663kVcygT0q'
	
	echo 'current_internal_CompressedFunctions_bytes='\""$current_internal_CompressedFunctions_bytes"\"
	echo 'current_internal_CompressedFunctions_cksum='\""$current_internal_CompressedFunctions_cksum"\"
	echo 'current_internal_CompressedFunctions='\"
	echo "$current_internal_CompressedFunctions"\"
	echo '! echo "$current_internal_CompressedFunctions" | base64 -d | xz -d > /dev/null && exit 1'
	
	echo 'source <( echo "$current_internal_CompressedFunctions" | base64 -d | xz -d )'
	#echo 'eval "$( echo "$current_internal_CompressedFunctions" | base64 -d | xz -d )"'
	
	echo 'unset current_internal_CompressedFunctions ; unset current_internal_CompressedFunctions_cksum ; unset current_internal_CompressedFunctions_bytes'
	
	echo '#compressedFunctions_uk4uPhB663kVcygT0q'
	echo
}


_here_rottenScript_bash() {
	local currentAttachmentLine
	
	currentAttachmentLine=`awk '/^#####Entry/ {print NR + 1; exit 0; }' "$scriptAbsoluteLocation"`
	let currentAttachmentLine="$currentAttachmentLine - 1"
	head -n$currentAttachmentLine "$scriptAbsoluteLocation"
	#echo $currentAttachmentLine
	
	
	
	
	
	_here_rottenScript_bash_compressedFunctions
	
	
	
	
	
	currentAttachmentLine=`awk '/^#__FOOTER_uk4uPhB663kVcygT0q_FOOTER__/ {print NR + 1; exit 0; }' "$scriptAbsoluteLocation"`
	#let currentAttachmentLine="$currentAttachmentLine - 1"
	tail -n+$currentAttachmentLine "$scriptAbsoluteLocation"
	#echo $currentAttachmentLine
}

_write_rottenScript_bash() {
	_messageNormal 'init: rotten: _write_rottenScript_bash'
	
	_here_rottenScript_bash "$scriptAbsoluteLocation" > "$scriptAbsoluteFolder"/rotten_install_compressed.sh
	chmod u+x "$scriptAbsoluteFolder"/rotten_install_compressed.sh
}


_indent_base64() {
	local currentLine
	while read -r currentLine
	do
		_safeEcho_newline '    '"$currentLine"
	done
}

_here_rottenScript_cloudConfig() {
	cat << 'CZXWXcRMTo8EmM8i4d'
#cloud-config

groups:
  - users
  - wireshark
  - cdrom
  - floppy
  - audio
  - dip
  - video
  - plugdev
  - netdev
  - bluetooth
  - lpadmin
  - scanner
  - disk
  - dialout
  - vboxusers
  - libvirt
  - docker

packages:
  - sudo
  - git
  - xz-utils

users:
  - default
  - name: user
    gecos: user
    sudo: ALL=(ALL) NOPASSWD:ALL
    primary_group: user
    groups: users, sudo, wheel, wireshark, cdrom, floppy, audio, dip, video, plugdev, netdev, bluetooth, lpadmin, scanner, disk, dialout, vboxusers, libvirt, docker
    lock_passwd: true
    shell: /bin/bash

timezone: US/Eastern
locale: en_US.UTF-8
locale_configfile: /etc/default/locale

swap:
    filename: /swapfile
    size: 1610612736

#hostname: hostname
ssh_pwauth: false
#disable_root: true


write_files:
- encoding: gzip
  content: !!binary |
CZXWXcRMTo8EmM8i4d
	
	# Experiment only.
	# | base64 -d | xz -d
	#base64 -w 0 | tr -d '\n'
	#cat "$scriptAbsoluteLocation" | xz -z -e9 -C crc64 --threads=1 | base64 -w 156 | fold -w 156 -s >> "$scriptAbsoluteLocation".xz.base64
	
	# Larger size, more inherently complete.
	#cat "$scriptAbsoluteLocation" | gzip -v9 2>/dev/null | base64 -w 156 | fold -w 156 -s | _indent_base64

	(
		
		local currentAttachmentLine
		
		currentAttachmentLine=`awk '/^#####Entry/ {print NR + 1; exit 0; }' "$scriptAbsoluteLocation"`
		let currentAttachmentLine="$currentAttachmentLine - 1"
		head -n$currentAttachmentLine "$scriptAbsoluteLocation"
		#echo $currentAttachmentLine
		
		
		
		
		# ATTENTION: Oddly, having the XZ compressed functions, through base64, then wrapped by gzip, is about 500bytes smaller than gzip only. Consider any possible tradeoffs carefully.
		#_here_rottenScript_bash_declareFunctions
		_here_rottenScript_bash_compressedFunctions
		
		
		
		
		currentAttachmentLine=`awk '/^#__FOOTER_uk4uPhB663kVcygT0q_FOOTER__/ {print NR + 1; exit 0; }' "$scriptAbsoluteLocation"`
		#let currentAttachmentLine="$currentAttachmentLine - 1"
		tail -n+$currentAttachmentLine "$scriptAbsoluteLocation"
		#echo $currentAttachmentLine

	) | gzip -v9 2>/dev/null | base64 -w 156 | fold -w 156 -s | _indent_base64
	
	
	cat << 'CZXWXcRMTo8EmM8i4d'
  path: /root/rottenScript.sh
  permissions: '0755'



runcmd:
  - localectl --no-convert set-x11-keymap us pc104
  - [ mkdir, -p, "/etc/skel/.ssh" ]
  - cat "/root/.ssh/authorized_keys" >> /etc/skel/.ssh/authorized_keys
  - [ mkdir, -p, "/home/user/.ssh" ]
  - cat "/root/.ssh/authorized_keys" >> /home/user/.ssh/authorized_keys
  - [ chown, "-R", "user:user", /home/user]
  - [ apt-get, -y, update ]
  - [ apt-get, -y, install, git, sudo ]
  - [ apt-get, -y, install, xz-utils ]
  - echo '----------------------------------------'
  - sudo -n -u root bash -c "cd ; /root/rottenScript.sh _install_and_run"
  - sudo -n -u root bash -c "cd ; /root/rottenScript.sh _custom_core_drop"


CZXWXcRMTo8EmM8i4d
}
_write_rottenScript_cloudConfig() {
	_messageNormal 'init: rotten: _write_rottenScript_cloudConfig'
	
	_here_rottenScript_cloudConfig "$scriptAbsoluteLocation" > "$scriptAbsoluteFolder"/cloud-config.cfg
}


_enter() {
	_messageNormal 'init: rotten: _enter'
	
	type _write_rottenScript_cloudConfig > /dev/null 2>&1 && _write_rottenScript_cloudConfig "$@"
	
	type _write_rottenScript_bash > /dev/null 2>&1 && _write_rottenScript_bash "$@"
	
	
	
	( [[ "$profileScriptLocation" != "" ]] || [[ "$ub_import" == "true" ]] || env | grep -i '^kde\|kde$' > /dev/null 2>&1 || [[ "$XDG_SESSION_DESKTOP" != "" ]] || [[ "$XDG_CURRENT_DESKTOP" != "" ]] ) && return 0
	
	_messageError 'if you see this in an INTERACTIVE TERMINAL then CEASE NOW!!!'
	_messagePlain_warn 'WARNING: will drastically reconfigure OS/userspace'
	echo 'NOT for computers with existing users!'
	echo 'Ctrl+c repeatedly to cancel!'
	
	echo 'wait: 25seconds: Ctrl+c repeatedly to cancel NOW!!!'
	local currentIteration
	for currentIteration in $(seq 1 25)
	do
		sleep 1
	done
	_messagePlain_warn 'NOT cancelled!'
	
	# ATTENTION: Uncomment if copying this script directly instead of as 'cloud init' derivative.
	( [[ "$profileScriptLocation" != "" ]] || [[ "$ub_import" == "true" ]] ) && return 0
	_install_and_run "$@"
	_custom_core_drop "$@"
}


# ATTENTION: End user function.
_custom_kde() {
	_messageNormal 'init: _custom_kde'
	
	_messagePlain_probe_var HOME
	cd "$HOME"
	
	git config --global pull.rebase false
	
	local currentBackupDir
	currentBackupDir="$HOME"/.kde.bak/$(_uid)
	
	_messagePlain_probe_var currentBackupDir
	mkdir -p "$currentBackupDir"
	
	# ATTENTION: NOTICE: Usually, this is a redistributable product of Soaring Distributions LLC .
	! [[ -e package_kde.tar.xz ]] && [[ -e /package_kde.tar.xz ]] && cp /package_kde.tar.xz "$HOME"/
	if ! [[ -e package_kde.tar.xz ]]
	then
		_messagePlain_probe_cmd wget 'https://github.com/soaringDistributions/ubDistBuild/raw/main/_lib/custom/package_kde.tar.xz'
	fi
	
	_messagePlain_probe_cmd mv "$HOME"/.config "$currentBackupDir"/.config
	_messagePlain_probe_cmd mv "$HOME"/.kde "$currentBackupDir"/.kde
	_messagePlain_probe_cmd mv "$HOME"/.local "$currentBackupDir"/.local
	_messagePlain_probe_cmd mv "$HOME"/.xournal "$currentBackupDir"/.xournal
	
	_messagePlain_probe_cmd tar xvf package_kde.tar.xz
	
	
	mkdir -p "$HOME"/.config/autostart
	mkdir -p "$HOME"/.config/systemd
	#_messagePlain_probe_cmd cp "$currentBackupDir"/.config/autostart/. "$HOME"/.config/autostart/
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.config/autostart/. "$HOME"/.config/autostart/
	#_messagePlain_probe_cmd cp "$currentBackupDir"/.config/systemd/. "$HOME"/.config/systemd/
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.config/systemd/. "$HOME"/.config/systemd/
	
	mkdir -p "$HOME"/.config/
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.config/startup.sh "$HOME"/.config/
	
	mkdir -p "$HOME"/.config/plasma-workspace/env/
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.config/plasma-workspace/env/startup.sh "$HOME"/.config/plasma-workspace/env/

	mkdir -p "$HOME"/.local/share/applications
	mkdir -p "$HOME"/.local/share/icons
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.local/share/applications/. "$HOME"/.local/share/applications/
	_messagePlain_probe_cmd sudo -n cp -a "$currentBackupDir"/.local/share/applications/. "$HOME"/.local/share/applications/
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.local/share/icons/. "$HOME"/.local/share/icons/

	mkdir -p "$HOME"/.local/state
	_messagePlain_probe_cmd cp -a "$currentBackupDir"/.local/state/. "$HOME"/.local/state/
}

_custom_kde_drop() {
	_messageNormal 'init: _custom_kde_drop'
	
	[[ "$custom_user" == "" ]] && export custom_user="user"
	_messagePlain_probe_var custom_user
	
	# DANGER: Requires "$scriptAbsoluteLocation" effectively, at least temporarily, readable and executable, by "$custom_user" (possibly bad for cloud-init, rclone, etc).
	local currentHOME
	currentHOME=$(sudo -n -u "$custom_user" bash -c 'echo $HOME')
	if [[ ! -e "$currentHOME" ]]
	then
		_messageFAIL
		_stop 1
		exit 1
	fi
	sudo -n cp "$scriptAbsoluteLocation" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chown "$custom_user":"$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chmod 700 "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	local currentExitStatus
	sudo -n -u "$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh _custom_kde "$@"
	currentExitStatus="$?"
	
	sudo -n rm -f "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	return "$currentExitStatus"
}


# ATTENTION: End user function.
#cp /mnt/c/core/infrastructure/ubDistBuild/_lib/ubiquitous_bash/_lib/kit/install/cloud/cloud-init/zRotten/zMinimal/rotten_install.sh ./ ; chmod u+x rotten_install.sh ; ./rotten_install.sh _custom_kde-limited
_custom_kde-limited() {
	_messageNormal 'init: _custom_kde-limited'
	
	_messagePlain_probe_var HOME
	cd "$HOME"
	
	local currentBackupDir
	currentBackupDir="$HOME"/.kde-limited.bak/$(_uid)
	
	_messagePlain_probe_var currentBackupDir
	mkdir -p "$currentBackupDir"
	
	# ATTENTION: NOTICE: Usually, this is a redistributable product of Soaring Distributions LLC .
	[[ -e /package_kde.tar.xz ]] && cp /package_kde.tar.xz "$HOME"/
	if ! [[ -e package_kde.tar.xz ]]
	then
		_messagePlain_probe_cmd wget 'https://github.com/soaringDistributions/ubDistBuild/raw/main/_lib/custom/package_kde.tar.xz'
	fi
	
	mkdir -p "$HOME"/.local/share/kactivitymanagerd/resources
	mkdir -p "$currentBackupDir"/.local/share/kactivitymanagerd/resources
	_messagePlain_probe_cmd mv -f "$HOME"/.local/share/kactivitymanagerd/resources/* "$currentBackupDir"/.local/share/kactivitymanagerd/resources/
	_messagePlain_probe_cmd mv -f "$HOME"/.local/share/kactivitymanagerd/resources/.* "$currentBackupDir"/.local/share/kactivitymanagerd/resources/
	
	mkdir -p "$HOME"/package_kde
	cd "$HOME"/package_kde
	_messagePlain_probe_cmd tar xvf "$HOME"/package_kde.tar.xz
	
	
	mkdir -p "$HOME"/.local/share/kactivitymanagerd/resources
	_messagePlain_probe_cmd cp -a "$HOME"/package_kde/.local/share/kactivitymanagerd/resources/* "$HOME"/.local/share/kactivitymanagerd/resources/
	_messagePlain_probe_cmd cp -a "$HOME"/package_kde/.local/share/kactivitymanagerd/resources/.* "$HOME"/.local/share/kactivitymanagerd/resources/

	mv -f "$HOME"/package_kde "$currentBackupDir"/
}

_custom_kde_drop-limited() {
	_messageNormal 'init: _custom_kde_drop-limited'
	
	[[ "$custom_user" == "" ]] && export custom_user="user"
	_messagePlain_probe_var custom_user
	
	# DANGER: Requires "$scriptAbsoluteLocation" effectively, at least temporarily, readable and executable, by "$custom_user" (possibly bad for cloud-init, rclone, etc).
	local currentHOME
	currentHOME=$(sudo -n -u "$custom_user" bash -c 'echo $HOME')
	if [[ ! -e "$currentHOME" ]]
	then
		_messageFAIL
		_stop 1
		exit 1
	fi
	sudo -n cp "$scriptAbsoluteLocation" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chown "$custom_user":"$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chmod 700 "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	local currentExitStatus
	sudo -n -u "$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh _custom_kde-limited "$@"
	currentExitStatus="$?"
	
	sudo -n rm -f "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	return "$currentExitStatus"
}


# ATTENTION: End user function.
_custom_core_fetch() {
	_messageNormal 'init: _custom_core'
	
	_messagePlain_probe_var HOME
	#mkdir -p "$HOME"/core
	cd "$HOME"
	
	if [[ -e "$HOME"/core/infrastructure ]] || [[ -e "$HOME"/core/installations ]] || [[ -e "$HOME"/ubDistFetch ]]
	then
		_messagePlain_bad 'fail: exists: core: do not attempt upgrade of existing directories with this script'
		_messageFAIL
		_stop 1
		exit 1
	fi
	
	
	#git clone --recursive git@github.com:soaringDistributions/ubDistFetch.git
	git clone https://github.com/soaringDistributions/ubDistFetch.git
	
	cd "$HOME"/ubDistFetch
	
	"$HOME"/ubDistFetch/_ubDistFetch.bat
	mv "$HOME"/ubDistFetch/_lib/core "$HOME"/
	[[ -e "$HOME"/ubDistFetch/_lib/FAIL ]] && _messagePlain_bad 'fail: _ubDistFetch' && return 1
	return 0
}


# ATTENTION: End user function.
_custom_core() {
	_messageNormal 'init: _custom_core'
	
	_messagePlain_probe_var HOME
	#mkdir -p "$HOME"/core
	cd "$HOME"
	
	
	if [[ -e "$HOME"/core/infrastructure ]] || [[ -e "$HOME"/core/installations ]]
	then
		_messagePlain_warn 'warn: exists: core: do not attempt upgrade of existing directories with this script'
		#return 1
		#_stop 1
		#exit 1
	else
		# ATTENTION: NOTICE: Usually, this is a redistributable product of Soaring Distributions LLC .
		# No longer preferred for reliability and other reasons. May be useful if already available locally.
		if [[ -e /core.tar.xz ]]
		then
			mv -f /core.tar.xz "$HOME"/
			tar xvf core.tar.xz
		else
			_messagePlain_probe 'wget | pv | xz -d | tar xv'
			# ATTENTION: WARNING: Depends on prebuilt package. Performing the fetch internally may be better for reliability and other reasons.
			# (ie. prefer _custom_core_fetch)
			#wget -qO- 'https://example.com/ubDistFetch/core.tar.xz' | pv | xz -d | tar xv --overwrite
			false
			[[ "$?" != "0" ]] && _messageFAIL
		fi
	fi
	
	[[ -e "$HOME"/core/infrastructure ]] && [[ -e "$HOME"/core/installations ]] && _messagePlain_good 'good: exists: core/infrastructure'
	
	return 0
}

_custom_core_drop() {
	_messageNormal 'init: _custom_core_drop'
	
	[[ "$custom_user" == "" ]] && export custom_user="user"
	_messagePlain_probe_var custom_user
	
	# DANGER: Requires "$scriptAbsoluteLocation" effectively, at least temporarily, readable and executable, by "$custom_user" (possibly bad for cloud-init, rclone, etc).
	local currentHOME
	currentHOME=$(sudo -n -u "$custom_user" bash -c 'echo $HOME')
	if [[ ! -e "$currentHOME" ]]
	then
		_messageFAIL
		_stop 1
		exit 1
	fi
	sudo -n cp "$scriptAbsoluteLocation" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chown "$custom_user":"$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh
	sudo -n chmod 700 "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	local currentExitStatus
	if [[ -e /core.tar.xz ]]
	then
		sudo -n -u "$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh _custom_core "$@"
		currentExitStatus="$?"
	else
		sudo -n -u "$custom_user" "$currentHOME"/rotten_"$ubiquitousBashID".sh _custom_core_fetch "$@"
		currentExitStatus="$?"
	fi
	
	sudo -n rm -f "$currentHOME"/rotten_"$ubiquitousBashID".sh
	
	return "$currentExitStatus"
}


_custom_kernel_sequence() {
	local functionEntryPWD
	functionEntryPWD="$PWD"
	
	sudo -n rm -f tmp_kernel/lts/*
	sudo -n rm -f tmp_kernel/mainline/*
	sudo -n rmdir tmp_kernel/lts
	sudo -n rmdir tmp_kernel/mainline
	sudo -n rmdir tmp_kernel
	mkdir -p tmp_kernel
	cd tmp_kernel
	
	env DEBIAN_FRONTEND=noninteractive sudo -n apt-get -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install --install-recommends curl jq
	
	if [[ ! -e /linux-mainline-amd64-debian.tar.gz ]]
	then
		_wget_githubRelease_internal "soaringDistributions/mirage335KernelBuild" "linux-mainline-amd64-debian.tar.gz"
		#curl -L -o linux-mainline-amd64-debian.tar.gz $(curl -s "https://api.github.com/repos/soaringDistributions/mirage335KernelBuild/releases" | jq -r ".[] | select(.name == \"internal\") | .assets[] | select(.name == \"linux-mainline-amd64-debian.tar.gz\") | .browser_download_url" | sort -n -r | head -n 1)
	else
		cp -f /linux-mainline-amd64-debian.tar.gz ./
	fi
	tar xf linux-mainline-amd64-debian.tar.gz
	sudo -n dpkg -i ./mainline/*.deb
	sudo -n rm -f ./mainline/.config ./mainline/linux-* ./mainline/statement.sh.out.txt
	sudo -n rm -f ./mainline/linux-mainline-amd64-debian.tar.gz
	sudo -n rm -f /linux-mainline-amd64-debian.tar.gz
	
	if [[ ! -e /linux-lts-amd64-debian.tar.gz ]]
	then
		_wget_githubRelease_internal "soaringDistributions/mirage335KernelBuild" "linux-lts-amd64-debian.tar.gz"
		#curl -L -o linux-lts-amd64-debian.tar.gz $(curl -s "https://api.github.com/repos/soaringDistributions/mirage335KernelBuild/releases" | jq -r ".[] | select(.name == \"internal\") | .assets[] | select(.name == \"linux-lts-amd64-debian.tar.gz\") | .browser_download_url" | sort -n -r | head -n 1)
	else
		cp -f /linux-lts-amd64-debian.tar.gz ./
	fi
	tar xf linux-lts-amd64-debian.tar.gz
	sudo -n dpkg -i ./lts/*.deb
	sudo -n rm -f ./lts/.config ./lts/linux-* ./lts/statement.sh.out.txt
	sudo -n rm -f ./lts/linux-lts-amd64-debian.tar.gz
	sudo -n rm -f /linux-lts-amd64-debian.tar.gz
	
	cd "$functionEntryPWD"
	sudo -n rm -f tmp_kernel/lts/*
	sudo -n rm -f tmp_kernel/mainline/*
	sudo -n rmdir tmp_kernel/lts
	sudo -n rmdir tmp_kernel/mainline
	sudo -n rmdir tmp_kernel
	rmdir tmp_kernel
	
	# May not be effective as of 2022-05-02, and may not be desirable.
	# https://www.tecmint.com/remove-old-kernel-in-debian-and-ubuntu/
	#sudo -n purge-old-kernels --keep 2
	
	cd "$functionEntryPWD"
}
_custom_kernel() {
	"$scriptAbsoluteLocation" _custom_kernel_sequence "$@"
}

_custom_bootOnce() {
	_messageNormal 'init: _custom_bootOnce'
	
	[[ "$custom_user" == "" ]] && export custom_user="user"
	
	
	_messageNormal '_custom_bootOnce: bootdisc'
	
	if ! sudo -n cat /etc/fstab | grep 'uk4uPhB663kVcygT0q' | grep 'bootdisc' > /dev/null 2>&1
	then
		echo 'LABEL=uk4uPhB663kVcygT0q /media/bootdisc iso9660 ro,nofail 0 0' | sudo -n tee -a /etc/fstab > /dev/null
	fi
	
	if ! type _here_bootdisc_startup_xdg > /dev/null 2>&1 || ! type _here_bootdisc_startup_script > /dev/null 2>&1 || ! type _here_bootdisc_startup_systemd > /dev/null 2>&1
	then
		_here_bootdisc_startup_xdg() {
		
			echo '
[Desktop Entry]
Comment=
Exec=sudo -n mount -t iso9660 -o ro,nofail LABEL=uk4uPhB663kVcygT0q /media/bootdisc ; sudo -n /media/bootdisc/rootnix.sh ; /media/bootdisc/cmd.sh
GenericName=
Icon=exec
MimeType=
Name=
Path=
StartupNotify=false
Terminal=false
TerminalOptions=
Type=Application
'
		
		}
		_here_bootdisc_startup_script() {
    		echo '#!/usr/bin/env bash
#export QT_QPA_PLATFORMTHEME= ; unset QT_QPA_PLATFORMTHEME ; export LANG="C"
#export DESKTOP_SESSION=plasma
#bash "'"$scriptAbsoluteLocation"'" _wsl_desktop-waitUp_wmctrl ; sleep 0.6
export LANG="C"
'

#dbus-run-session
#_safeEcho_newline 'exec '"$@"' &'
_safeEcho_newline 'sudo -n mount -t iso9660 -o ro,nofail LABEL=uk4uPhB663kVcygT0q /media/bootdisc > /dev/null ; sudo -n /media/bootdisc/rootnix.sh > /dev/null ; /media/bootdisc/cmd.sh > /dev/null'

			echo '
#disown -h $!
disown
disown -a -h -r
disown -a -r
#rm -f "$HOME"/.config/plasma-workspace/env/startup.sh
#rm -f "$HOME"/.config/startup.sh
#sudo -n rm -f /etc/xdg/autostart/startup.desktop
#rm -f "$HOME"/.config/systemd/user/bootdiscStartup.service
#bash "'"$scriptAbsoluteLocation"'" _wsl_desktop-waitDown_wmctrl
#currentStopJobs=\$(jobs -p -r 2> /dev/null) ; [[ "\$displayStopJobs" != "" ]] && kill \$displayStopJobs > /dev/null 2>&1
'
}

	_here_bootdisc_startup_systemd() {
		echo '[Unit]
After=xdg-desktop-autostart.target

[Install]
WantedBy=xdg-desktop-autostart.target

[Service]
Type=oneshot
ExecStart="'"$1"'"/.config/startup.sh'
	}
	fi
	
	
	sudo -n mkdir -p /home/"$custom_user"/.config/autostart
	sudo -n mkdir -p /etc/xdg/autostart
	sudo -n mkdir -p /home/"$custom_user"/.config/plasma-workspace/env
	sudo -n mkdir -p /home/"$custom_user"/.config/systemd/user
	#_here_bootdisc_startup_xdg | sudo -n tee /home/"$custom_user"/.config/autostart/startup.desktop > /dev/null
	#_here_bootdisc_startup_xdg | sudo -n tee /etc/xdg/autostart/startup.desktop > /dev/null
	#echo '#!'"/usr/bin/env bash" | sudo -n tee /home/"$custom_user"/.config/plasma-workspace/env/startup.sh > /dev/null
	# | grep Exec | sed 's/^Exec=//' | sed 's/$/ \&/' | sudo -n tee -a /home/"$custom_user"/.config/plasma-workspace/env/startup.sh > /dev/null
	_here_bootdisc_startup_script | sudo -n tee /home/"$custom_user"/.config/startup.sh > /dev/null
	_here_bootdisc_startup_systemd /home/"$custom_user" | sudo -n tee /home/"$custom_user"/.config/systemd/user/bootdiscStartup.service > /dev/null

	sudo -n chown -R user:user /home/"$custom_user"/.config
	sudo -n chmod 555 /home/"$custom_user"/.config/autostart/startup.desktop
	sudo -n chmod 755 /etc/xdg/autostart/startup.desktop
	sudo -n chmod 755 /home/"$custom_user"/.config/plasma-workspace/env/startup.sh
	
	sudo -n chmod 644 /home/"$custom_user"/.config/systemd/user/bootdiscStartup.service
	sudo -n chmod 755 /home/"$custom_user"/.config/startup.sh
	
    sudo -n -u "$custom_user" bash -c 'systemctl --user stop bootdiscStartup'
    sudo -n -u "$custom_user" bash -c 'systemctl --user daemon-reload'
    sudo -n -u "$custom_user" bash -c 'systemctl --user enable bootdiscStartup'
    sudo -n -u "$custom_user" bash -c 'systemctl --user enable bootdiscStartup.service'

	
	sudo -n mkdir -p /home/"$custom_user"/___quick
	echo '#!/bin/bash' | sudo -n tee /home/"$custom_user"/___quick/mount.sh > /dev/null
	echo 'sudo -n mount -t fuse.vmhgfs-fuse -o allow_other,uid=$(id -u "$USER"),gid=$(id -g "$USER"),nonempty .host: "$HOME"/___quick' | sudo -n tee -a /home/"$custom_user"/___quick/mount.sh > /dev/null
	sudo -n chown -R user:user /home/"$custom_user"/___quick
	sudo -n chmod 755 /home/"$custom_user"/___quick/mount.sh
	
	( sudo -n crontab -l ; echo '@reboot sleep 0.1 ; /media/bootdisc/rootnix.sh > /var/log/rootnix.log 2>&1' ) | sudo -n crontab '-'
	
	( sudo -n -u user bash -c "crontab -l" ; echo '@reboot sleep 0.1 ; /home/'"$custom_user"'/.ubcore/ubiquitous_bash/lean.sh _unix_renice_execDaemon > /home/'"$custom_user"/'_unix_renice_execDaemon.log 2>&1' ) | sudo -n -u user bash -c "crontab -"
	#( sudo -n -u user bash -c "crontab -l" ; echo '*/9 * * * * sleep 0.1 ; /home/'"$custom_user"'/.ubcore/ubiquitous_bash/lean.sh _unix_renice_execDaemon > /home/'"$custom_user"/'_unix_renice_execDaemon.log 2>&1' ) | sudo -n -u user bash -c "crontab -"
	( sudo -n -u user bash -c "crontab -l" ; echo '#*/1 * * * * sleep 0.1 ; /home/'"$custom_user"'/.ubcore/ubiquitous_bash/ubcore.sh _w540_fan_cron > /dev/null 2>&1' ) | sudo -n -u user bash -c "crontab -"
	
	
	# WARNING: Not able to interact with X11 DISPLAY .
	#( sudo -n -u user bash -c "crontab -l" ; echo '#@reboot sleep 0.1 ; /home/'"$custom_user"'/.ubcore/ubiquitous_bash/ubcore.sh _w540_display_start > /dev/null 2>&1' ) | sudo -n -u user bash -c "crontab -"
	
	
	# Reundancy may be acceptable for this .
	echo '#!'"/usr/bin/env bash" | sudo -n tee /home/"$custom_user"/.config/plasma-workspace/env/w540_display_start.sh > /dev/null
	echo '#'"/home/""$custom_user""/.ubcore/ubiquitous_bash/ubcore.sh _w540_display_start &" | sudo -n tee -a /home/"$custom_user"/.config/plasma-workspace/env/w540_display_start.sh > /dev/null
	sudo -n chmod 755 /home/"$custom_user"/.config/plasma-workspace/env/w540_display_start.sh
	echo '[Unit]
After=xdg-desktop-autostart.target

[Install]
WantedBy=xdg-desktop-autostart.target

[Service]
Type=oneshot
ExecStart=#/home/"'"$custom_user"'"/.ubcore/ubiquitous_bash/ubcore.sh _w540_display_start' | sudo -n tee /home/"$custom_user"/.config/systemd/user/w540_display_start.service > /dev/null
	sudo -n chmod 644 /home/"$custom_user"/.config/systemd/user/w540_display_start.service
	sudo -n -u "$custom_user" bash -c 'systemctl --user stop w540_display_start'
	sudo -n -u "$custom_user" bash -c 'systemctl --user daemon-reload'
	sudo -n -u "$custom_user" bash -c 'systemctl --user enable w540_display_start'
	sudo -n -u "$custom_user" bash -c 'systemctl --user enable w540_display_start.service'
	
	
	
	
	
	_messageNormal '_custom_bootOnce: /sbin/vboxconfig'
	
	sudo -n /sbin/vboxconfig
}

# echo -n | openssl dgst -whirlpool -binary - | xxd -p -c 256
# https://github.com/openssl/openssl/issues/10145#issuecomment-1054074144
# https://github.com/openssl/openssl/issues/5118#issuecomment-1707860097
# https://gist.github.com/rdh27785/97210d439a280063bd768006450c435d#file-openssl-cnf-diff
# https://gist.githubusercontent.com/rdh27785/97210d439a280063bd768006450c435d/raw/3789f079442d35c2ae2dc0ff06c314e7169adf7b/openssl.cnf.diff
# https://help.heroku.com/88GYDTB2/how-do-i-configure-openssl-to-allow-the-use-of-legacy-cryptographic-algorithms
# https://wiki.openssl.org/index.php/OpenSSL_3.0
_here_opensslConfig_legacy() {
	cat << 'CZXWXcRMTo8EmM8i4d'

openssl_conf = openssl_init

[openssl_init]
providers = provider_sect

[provider_sect]
default = default_sect
legacy = legacy_sect

[default_sect]
activate = 1

[legacy_sect]
activate = 1

CZXWXcRMTo8EmM8i4d
}
_custom_splice_opensslConfig() {
	#local functionEntryPWD
	#functionEntryPWD="$PWD"

	#cd /
	_here_opensslConfig_legacy | sudo -n tee /etc/ssl/openssl_legacy.cnf > /dev/null 2>&1

    if ! sudo -n grep 'openssl_legacy' /etc/ssl/openssl.cnf > /dev/null 2>&1
    then
        sudo -n cp -f /etc/ssl/openssl.cnf /etc/ssl/openssl.cnf.orig
        echo '


.include = /etc/ssl/openssl_legacy.cnf

' | sudo -n cat /etc/ssl/openssl.cnf.orig - | sudo -n tee /etc/ssl/openssl.cnf > /dev/null 2>&1
    fi

	#cd "$functionEntryPWD"
}

_custom_write_sshdConfig() {
	_messageNormal 'init: rotten: _custom_write_sshdConfig'
	
	sudo -n mkdir -p /etc/ssh
	
	echo '
Include /etc/ssh/sshd_config.d/*.conf

#Port 22
#Protocol 2

PermitRootLogin prohibit-password

ChallengeResponseAuthentication no

# If you just want the PAM account and session checks to run without
# PAM authentication, then enable this but set PasswordAuthentication
# and ChallengeResponseAuthentication to  no .
UsePAM yes

X11Forwarding yes

PrintMotd no

AcceptEnv LANG LC_*

Subsystem sftp	/usr/lib/openssh/sftp-server

PasswordAuthentication no

AllowUsers root user

# https://serverfault.com/questions/434896/ssh-one-authorized-keys-for-multiple-service-accounts
AuthorizedKeysFile  .ssh/authorized_keys /etc/ssh/authorized_keys


##ClientAliveInterval 6
##ClientAliveCountMax 9

#ClientAliveInterval 3
#ClientAliveCountMax 3

#GatewayPorts clientspecified

#Match user user
	##AllowTcpForwarding yes
	#AllowTcpForwarding no
	#PermitOpen localhost:*
	#PermitOpen 127.0.0.1:*
	#PermitOpen ::1:*
	#PermitOpen *:22
	#PermitListen *
	#X11Forwarding no
	#AllowAgentForwarding no
	#ForceCommand    /bin/false
	##ChrootDirectory /sshchroot

' | sudo -n tee /etc/ssh/sshd_config > /dev/null
	
	
	
}

# ATTENTION: Override (rarely, if necessary) .
_custom_write_sudoers() {
	_messageNormal 'init: rotten: _custom_write_sudoers'
	cat << CZXWXcRMTo8EmM8i4d | tee -a /etc/sudoers > /dev/null
#_____
#Defaults	env_reset
#Defaults	mail_badpass
#Defaults	secure_path="/root/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"

Defaults  env_keep += "currentChroot"
Defaults  env_keep += "chrootName"

root	ALL=(ALL:ALL) ALL
#user   ALL=(ALL:ALL) NOPASSWD: ALL
#pi ALL=(ALL:ALL) NOPASSWD: ALL

$custom_user ALL=(ALL:ALL) NOPASSWD: ALL

%admin   ALL=(ALL:ALL) NOPASSWD: ALL
%sudo   ALL=(ALL:ALL) NOPASSWD: ALL
%wheel   ALL=(ALL:ALL) NOPASSWD: ALL
#%sudo	ALL=(ALL:ALL) ALL

CZXWXcRMTo8EmM8i4d
}

_custom_construct_permissions_user() {
	_messageNormal 'init: rotten: _custom_construct_permissions_user'
	local current_user_uid
	current_user_uid=$(sudo -n id -u "$1" 2>/dev/null)
	
	_messagePlain_probe 'chown '"$current_user_uid":"$current_user_uid" /home/"$1"
	
	if [[ "$1" == "root" ]] || [[ "$current_user_uid" == '0' ]]
	then
		sudo -n chmod 700 /root
		sudo -n chown -R "$current_user_uid":"$current_user_uid" /root
		return
	fi
	
	sudo -n chmod 700 /home/"$1"
	sudo -n chown -R "$current_user_uid":"$current_user_uid" /home/"$1"
}

# "$1" == username
_custom_construct_user() {
	_messageNormal 'init: rotten: _custom_construct_user'
	
	_messagePlain_probe 'user= '"$1"
	! sudo -n id -u "$1" > /dev/null 2>&1 && sudo -n useradd -m "$1"
	! sudo -n id -u "$1" > /dev/null 2>&1 && _messageError 'FAIL: User NOT included!' && _stop 1
	
	_custom_construct_permissions_user "$1"
}

_custom() {
	_messageNormal 'init: rotten: _custom'
	true
	
	export custom_user="user"
	
	
	# Such use of swap has been found to not necessarily cause any significant delay, at least if the storage is SSD.
	local current_hostMemoryTotal
	if [[ -e "/proc/meminfo" ]]
	then
		current_hostMemoryTotal=$(cat /proc/meminfo | grep MemTotal | tr -cd '[[:digit:]]')
	else
		current_hostMemoryTotal="128000"
	fi
	if [[ "$current_hostMemoryTotal" -lt "2512000" ]] && [[ ! -e /swapfile ]]
	then
		sudo -n dd if=/dev/zero of=/swapfile bs=1M count=1536
		sudo -n chmod 0600 /swapfile
		sudo -n mkswap /swapfile
		sudo -n swapon /swapfile
		echo '/swapfile swap swap defaults 0 0' | sudo -n tee -a /etc/fstab
	fi
	
	_custom_write_sshdConfig
	_install_and_run_package ssh
	_install_and_run_package openssh-server
	_install_and_run_package openssh-client


	_install_and_run_package openssl
	_install_and_run_package xxd
	_custom_splice_opensslConfig
	
	# https://askubuntu.com/questions/98006/how-do-i-prevent-policykit-from-asking-for-a-password
	mkdir -p /var/lib/polkit-1/localauthority/50-local.d
	echo '[Do anything you want]
Identity=unix-group:sudo
Action=*
ResultActive=yes' > /var/lib/polkit-1/localauthority/50-local.d/disable-passwords.pkla
	
	mkdir -p /etc/sddm.conf.d
	echo '[Autologin]
User=user
Session=plasma
Relogin=true
' > /etc/sddm.conf.d/autologin.conf
	
	
	#US/Eastern
	_install_and_run_package locales-all
	sudo -n timedatectl set-timezone US/Eastern
	#en_US.UTF-8
	sudo -n update-locale LANG=en_US.UTF-8 LANGUAGE
	sudo -n localectl set-locale LANG=en_US.UTF-8
	localectl --no-convert set-x11-keymap us pc104
	
	# https://lwn.net/Articles/283572/
	wget -o /dev/null  -O - "http://www.random.org/integers/?num=48&min=0&max=255&col=4&base=16&format=plain&md=new" | sudo tee /dev/random | head -c 2
	[[ -e /dev/hwrng ]] && sudo -n head -c 256 /dev/hwrng | sudo tee -a /dev/random > /dev/null
	head -c 24 /dev/random | sudo tee -a /dev/random > /dev/null
	
	_custom_construct_user root
	# WARNING: Sets random password, intentionally, to lockout password login. SSH key or similar *required*.
	# ATTENTION: Override (if necessary).
	#echo 'root:'$(_uid 12) | sudo -n chpasswd
	#echo 'root:'$(_uid 32) | sudo -n chpasswd
	sudo -n usermod -s /bin/bash root
	
	# If blank root password, set random password.
	# https://serverfault.com/questions/240957/how-find-user-with-empty-password-in-linux
	if ! sudo -n getent shadow | grep 'root:\$' | cut -d':' -f 2 | grep '\w' -c -m 1 > /dev/null
	then
		echo root':'$(_uid 12) | sudo -n chpasswd
		echo root':'$(_uid 32) | sudo -n chpasswd
	fi
	
	_custom_construct_user "$custom_user"
	# ATTENTION: Override (if necessary).
	# WARNING: Sets random password, intentionally, to lockout password login. SSH key or similar *required*.
	echo "$custom_user"':'$(_uid 12) | sudo -n chpasswd
	echo "$custom_user"':'$(_uid 32) | sudo -n chpasswd
	sudo -n usermod -s /bin/bash "$custom_user"
	
	
	groupadd users
	groupadd wireshark
	groupadd cdrom
	groupadd floppy
	groupadd audio
	groupadd dip
	groupadd video
	groupadd plugdev
	groupadd netdev
	groupadd bluetooth
	groupadd lpadmin
	groupadd scanner
	groupadd disk
	groupadd dialout
	groupadd vboxusers
	groupadd vboxsf
	groupadd libvirt
	groupadd docker
	groupadd kvm
	
	
	# ATTENTION: Some of these commands may fail. This is normal.
	sudo -n usermod -a -G sudo "$custom_user"
	sudo -n usermod -a -G wheel "$custom_user"
	sudo -n usermod -a -G wireshark "$custom_user"
	
	sudo -n usermod -a -G users "$custom_user"
	
	sudo -n usermod -a -G cdrom "$custom_user"
	sudo -n usermod -a -G floppy "$custom_user"
	sudo -n usermod -a -G audio "$custom_user"
	sudo -n usermod -a -G dip "$custom_user"
	sudo -n usermod -a -G video "$custom_user"
	sudo -n usermod -a -G plugdev "$custom_user"
	sudo -n usermod -a -G netdev "$custom_user"
	sudo -n usermod -a -G bluetooth "$custom_user"
	sudo -n usermod -a -G lpadmin "$custom_user"
	sudo -n usermod -a -G scanner "$custom_user"
	
	sudo -n usermod -a -G disk "$custom_user"
	sudo -n usermod -a -G dialout "$custom_user"
	sudo -n usermod -a -G lpadmin "$custom_user"
	sudo -n usermod -a -G scanner "$custom_user"
	sudo -n usermod -a -G vboxusers "$custom_user"
	sudo -n usermod -a -G vboxsf "$custom_user"
	sudo -n usermod -a -G libvirt "$custom_user"
	sudo -n usermod -a -G docker "$custom_user"
	
	sudo -n usermod -a -G kvm "$custom_user"
	
	
	
	
	
	mkdir -p "/etc/skel/.ssh"
	cat "/root/.ssh/authorized_keys" >> /etc/skel/.ssh/authorized_keys
	mkdir -p /home/"$custom_user""/.ssh"
	chown "$custom_user":"$custom_user" /home/"$custom_user""/.ssh"
	cat "/root/.ssh/authorized_keys" >> /home/"$custom_user"/.ssh/authorized_keys
	
	
	_install_and_run_package cloud-init
	_install_and_run_package cloud-initramfs-growroot
	
	_install_and_run_package cloud-utils
	_install_and_run_package cloud-guest-utils
	_install_and_run_package cloud-image-utils
	
	_install_and_run_package qemu-guest-agent
	
	# https://docs.hetzner.com/cloud/networks/server-configuration/
	curl https://packages.hetzner.com/hcloud/deb/hc-utils_0.0.4-1_all.deb -o /tmp/hc-utils_0.0.4-1_all.deb -s
	env DEBIAN_FRONTEND=noninteractive apt-get -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install --install-recommends /tmp/hc-utils_0.0.4-1_all.deb
}


# https://serverfault.com/questions/259226/automatically-keep-current-version-of-config-files-when-apt-get-install
_install_and_run_package() {
	if ( [[ -e /etc/issue ]] && cat /etc/issue | grep 'Debian\|Raspbian' > /dev/null 2>&1 ) || ( [[ -e /etc/issue ]] && cat /etc/issue | grep 'Ubuntu' > /dev/null 2>&1 )
	then
		sudo -n apt-get -y update
		sudo -n env DEBIAN_FRONTEND=noninteractive apt-get -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install --install-recommends "$@"
		apt-get -y update
		env DEBIAN_FRONTEND=noninteractive apt-get -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" install --install-recommends "$@"
	fi
}

_install() {
	_messageNormal 'init: rotten: _install'
	
	! _mustBeRoot && exit 1
	
	usermod -e -1 root
	if chage -l root | grep 'must be changed'
	then
		echo 'root:'$(_uid 12) | sudo -n chpasswd
		echo 'root:'$(_uid 32) | sudo -n chpasswd
	fi
	
	export custom_user="user"
	
	! type -p sudo && _install_and_run_package sudo
	_install_and_run_package git
	
	_custom_write_sudoers
	
	! _mustGetSudo && exit 1
	
	
	touch /etc/motd
	cp -n /etc/motd /etc/motd.bak
	echo "rotten! WARNING! _install! imminent! reboot may occur!" >> /etc/motd
	
	_custom
	
	
	_sep
	
	sudo -n cp "$scriptAbsoluteLocation" /home/"$custom_user"/rottenScript.sh
	sudo -n chown "user:user" "/home/""$custom_user""/rottenScript.sh"
	sudo -n chmod "700" "/home/""$custom_user""/rottenScript.sh"
	
	
	
	
	
	# ATTENTION: Optional. Attempts to install full 'ubiquitous_bash.sh' from upstream.
	! [[ -e /ubiquitous_bash.sh ]] && [[ ! -e ./ubiquitous_bash.sh ]] && wget 'https://raw.githubusercontent.com/mirage335/ubiquitous_bash/master/ubiquitous_bash.sh'
	if [[ -e /ubiquitous_bash.sh ]]
	then
		#rm -f ./ubiquitous_bash.sh > /dev/null 2>&1
		cp -f /ubiquitous_bash.sh ./ubiquitous_bash.sh
	fi
	if [[ -e ./ubiquitous_bash.sh ]]
	then
		chmod 755 ubiquitous_bash.sh
		! ./ubiquitous_bash.sh _true && echo 'missing: ubiquitous_bash.sh' && exit 1
		./ubiquitous_bash.sh _false && echo 'missing: ubiquitous_bash.sh' && exit 1

		_sep
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _write_wsl_qt5ct_conf 2>&1"
		_custom_kde_drop "$@"
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _write_wsl_qt5ct_conf 2>&1"
		_sep
		
		#"$scriptAbsoluteLocation" _setupUbiquitous
		#"$scriptAbsoluteLocation" _getMost
		#"$scriptAbsoluteLocation" _get_veracrypt
		#"$scriptAbsoluteLocation" _test
		
		_install_and_run_package git
		
		sudo -n cp -f ./ubiquitous_bash.sh /home/"$custom_user"
		sudo -n chown "user:user" "/home/""$custom_user""/ubiquitous_bash.sh"
		sudo -n chmod "755" "/home/""$custom_user""/ubiquitous_bash.sh"
		sudo -n chown "$custom_user":"$custom_user" "/home/""$custom_user""/ubiquitous_bash.sh"
		#sudo -n -u user "/home/""$custom_user""/ubiquitous_bash.sh" _setupUbiquitous
		sudo -n -u user sh -c "cd ; ""/home/""$custom_user""/ubiquitous_bash.sh"" _setupUbiquitous 2>&1"
		
		sudo -n cp -f ./ubiquitous_bash.sh /root
		sudo -n chown "user:user" /root"/ubiquitous_bash.sh"
		sudo -n chmod "755" /root"/ubiquitous_bash.sh"
		sudo -n chown root:root /root"/ubiquitous_bash.sh"
		#sudo -n -u root /root"/ubiquitous_bash.sh" _setupUbiquitous
		sudo -n -u root sh -c "cd ; /root/ubiquitous_bash.sh _setupUbiquitous 2>&1"
		
		
		
		# ATTENTION: Optional. Attempts '_getMost' and '_test' from full 'ubiquitous_bash.sh' from upstream.
		_sep
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _getMost 2>&1"
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _get_veracrypt 2>&1"
		sudo -n --preserve-env=devfast -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _test 2>&1" | tee /var/log/ubiquitous_bash-test
		[[ ${PIPESTATUS[0]} != "0" ]] && _messageFAIL

		# May change order to preceed '_test' .
		#sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _mustHave_nixos 2>&1" | tee /var/log/ubiquitous_bash-_mustHave_nixos
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _get_from_nix 2>&1" | tee /var/log/ubiquitous_bash-get_from_nix
		[[ ${PIPESTATUS[0]} != "0" ]] && _messageFAIL
		
		sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _get_workarounds 2>&1" | tee /var/log/ubiquitous_bash-get_workarounds
		[[ ${PIPESTATUS[0]} != "0" ]] && _messageFAIL
	fi
	
	_sep
	
	sudo -n env DEBIAN_FRONTEND=noninteractive apt-get -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" -y upgrade
	
	sudo -n -u user bash -c "cd ; mkdir -p "/home/"$custom_user""/Downloads"
	sudo -n -u user bash -c "cd ; mkdir -p "/home/"$custom_user""/project/_random/_buried"

	[[ ! -e /cygdrive ]] && sudo -n ln -s /mnt /cygdrive
	
	sudo -n -u user bash -c "git config --global pull.rebase false"
	
	
	_sep
	sleep 20
	#sudo -n -u user bash -c "cd ; mkdir -p "/home/"$custom_user""/Downloads"
	#sudo -n -u user bash -c "cd ; cd /home/"$custom_user"/Downloads ; wget https://example.com"
	#sudo -n -u user bash -c "cd ; mkdir -p /home/"$custom_user"/example"
	#sudo -n -u user bash -c "cd ; cd example ; tar zxf "/home/"$custom_user""/Downloads/example.tar.gz"
	
	#sudo -n -u user bash -c "cd ; cd example ; ./example.sh --config"

	_sep
	

	sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _write_wsl_qt5ct_conf 2>&1"


	_sep

	sudo -n -u root sh -c "cd ; /root/ubiquitous_bash.sh _here_wsl_conf" | tee /etc/wsl.conf > /dev/null
	
	_sep
	#sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _write_wsl_qt5ct_conf 2>&1"
	#_custom_kde_drop "$@"
	##sudo -n -u user sh -c "cd ; ""/home/""$custom_user""/ubiquitous_bash.sh"" _setupUbiquitous 2>&1"
	#sudo -n -u user INSTANCE_ID="$INSTANCE_ID" sh -c "cd ; /home/user/bin/ubiquitous_bash.sh _write_wsl_qt5ct_conf 2>&1"
	
	_sep
	_custom_bootOnce "$@"
	
	# Would have been necessitated by...
	#wsl -d ubdist sudo -n rm -rf /home/user/.local/share/kactivitymanagerd/resources/*
	# However, while that may reduce some CPU usage defect, at least the 'favorites' menu is deleted as well.

	#_sep
	#_custom_kde_drop "$@"
	##sudo -n -u user sh -c "cd ; ""/home/""$custom_user""/ubiquitous_bash.sh"" _setupUbiquitous 2>&1"

	#_sep
	#_custom_kde-limited "$@"
	
	#_custom_core_drop "$@"
	
	
	
	_sep
	#sleep 20
	
	#( sudo -n -u user bash -c "crontab -l" ; echo '@reboot sleep 0.1 ; cd '/home/"$custom_user"'/ ; '/home/"$custom_user"'/rottenScript.sh _run > /home/'"$custom_user"'/_run.log 2>&1' ) | sudo -n -u user bash -c "crontab -"
	
	[[ ! -e /root/rottenScript.sh ]] && sudo -n cp "$scriptAbsoluteLocation" /root/rottenScript.sh
	sudo -n chmod 700 /root/rottenScript.sh
	( sudo -n crontab -l ; echo '@reboot sleep 0.1 ; /root/rottenScript.sh _run > /var/log/run.log 2>&1' ) | sudo -n crontab '-'
	sudo -n ln -s /var/log/run.log /root/run.log
	
	sudo -n chmod 700 "$scriptAbsoluteLocation"
	
	
	if [[ -e /etc/issue ]] && ( cat /etc/issue | grep 'Ubuntu' | grep '20.04' > /dev/null 2>&1 || cat /etc/issue | grep 'Ubuntu' > /dev/null 2>&1 )
	then
		# https://itsfoss.com/install-kde-on-ubuntu/
		_install_and_run_package kde-full
		# OR
		#_install_and_run_package kde-standard
		#sudo -n apt install kde-standard
		
		# https://askubuntu.com/questions/1114525/reconfigure-the-display-manager-non-interactively
		echo "/usr/bin/sddm" > /etc/X11/default-display-manager
		DEBIAN_FRONTEND=noninteractive DEBCONF_NONINTERACTIVE_SEEN=true dpkg-reconfigure sddm
		echo set shared/default-x-display-manager sddm | debconf-communicate
		
		sudo -n systemctl stop gdm3
	fi
	
	sudo -n apt-get remove --autoremove -y plasma-discover
	
	# https://forum.manjaro.org/t/high-cpu-usage-from-plasmashell-kactivitymanagerd/114305
	# DANGER: Unusual. Uses 'rm -rf' directly. Presumed ONLY during dist/OS install .
	#sudo -n rm -rf /home/"$custom_user"/.local/share/kactivitymanagerd/resources/*
	
	
	# https://askubuntu.com/questions/98006/how-do-i-prevent-policykit-from-asking-for-a-password
	mkdir -p /var/lib/polkit-1/localauthority/50-local.d
	echo '[Do anything you want]
Identity=unix-group:sudo
Action=*
ResultActive=yes' > /var/lib/polkit-1/localauthority/50-local.d/disable-passwords.pkla
	
	# Default 'overlay2' storage driver apparently may fail from liveISO/liveUSB .
	# https://docs.docker.com/storage/storagedriver/overlayfs-driver/
	mkdir -p "$globalVirtFS"/etc/docker
	echo '{
	"storage-driver": "fuse-overlayfs"
}' > "$globalVirtFS"/etc/docker/daemon.json
	
	
	# https://en.wiktionary.org/wiki/poke_the_bear
	# https://forums.virtualbox.org/viewtopic.php?t=25797
	sudo -n VBoxManage setextradata global GUI/SuppressMessages "Update"
	sudo -n -u user VBoxManage setextradata global GUI/SuppressMessages "Update"
	
	# May be important for '_userVBox' and such if only 'real' "$HOME" directory configuration is respected. Annoying in any case.
	VBoxManage setextradata global GUI/SuppressMessages "remindAboutAutoCapture,remindAboutMouseIntegration,remindAboutMouseIntegrationOn,showRuntimeError.warning.HostAudioNotResponding,remindAboutGoingSeamless,remindAboutInputCapture,remindAboutGoingFullscreen,remindAboutMouseIntegrationOff,confirmGoingSeamless,confirmInputCapture,remindAboutPausedVMInput,confirmVMReset,confirmGoingFullscreen,remindAboutWrongColorDepth"
	
	sudo -n apt-get -y clean
	
	sudo -n systemctl start sddm
	
	
	# ATTENTION: DANGER: If necessary, delete !
	#sudo -n rm -f /home/user/rottenScript.sh
	
	sudo -n chmod 700 "$scriptAbsoluteLocation"
	
	mv -f /etc/motd.bak /etc/motd
	uptime
	wall 'rotten: build complete'
	#sudo -n reboot
	_sep
	#sudo -n -u user bash -c "cd ; cd example ; "/home/"$custom_user""/rottenScript.sh _run"
}
_install_and_run() {
	_messageNormal 'init: rotten: _install_and_run'
	_install "$@"
	#sudo -n -u user bash -c "cd ; cd example ; "/home/"$custom_user""/rottenScript.sh _run"
}



_regenerate_docker() {
	local currentDelay
	currentDelay="$1"
	[[ "$currentDelay" == "" ]] && currentDelay=1
	
	if ! sudo -n systemctl status docker | grep 'active (running)' || sudo -n systemctl status docker | grep 'code=exited, status=1/FAILURE'
	then
		sudo -n rmdir /var/lib/docker/runtimes
		sudo -n systemctl stop docker
		sudo -n rmdir /var/lib/docker/runtimes
		sleep "$currentDelay"
		sudo -n rmdir /var/lib/docker/runtimes
		sudo -n systemctl start docker
	fi
	return 0
}

_regenerate() {
	_messageNormal 'init: rotten: _regenerate'
	
	local currentWait
	currentWait=0
	while ! sudo -n true && [[ "$currentWait" -lt 180 ]]
	do
		sleep 1
		let currentWait="$currentWait"+1
	done

	##cd /home/user
	_mustGetSudo
	_mustBeRoot
	
	
	if [[ -e /regenerate ]]
	then
		# WARNING: DANGER: MUST enable if image build may result in any added 'authorized_keys'.
		#sudo -n rm -f /root/.ssh/authorized_keys
		#sudo -n rm -f /home/user/.ssh/authorized_keys
		#sudo -n rm -f /etc/ssh/authorized_keys
		
		
		echo 'root:'$(_uid 12) | sudo -n chpasswd
		echo 'root:'$(_uid 32) | sudo -n chpasswd
		
		echo 'user:'$(_uid 12) | sudo -n chpasswd
		echo 'user:'$(_uid 32) | sudo -n chpasswd
		
		
		# https://forums.raspberrypi.com/viewtopic.php?t=125345
		sudo -n rm -f /etc/ssh/ssh_host*
		sudo -n ssh-keygen -A
	fi
	
	_regenerate_docker 1
	! sudo -n systemctl status docker | grep 'active (running)' && _regenerate_docker 3
	! sudo -n systemctl status docker | grep 'active (running)' && _regenerate_docker 9
	! sudo -n systemctl status docker | grep 'active (running)' && _regenerate_docker 27
	
	
	sudo -n rm -f /regenerate > /dev/null
	
	return 0
}

_run() {
	_messageNormal 'init: rotten: _run'
	
	##cd /home/user
	_mustGetSudo
	_mustBeRoot
	
	# May ensure at least some Virtual Terminals have already run '/bin/bash', '~/.bashrc', etc, thus more quickly usable if overwhelmed (eg. by swapping).
	systemctl start getty@tty2
	systemctl start getty@tty3
	
	if [[ -e /regenerate ]]
	then
		_regenerate "$@"
	fi
	sudo -n rm -f /etc/ssh/authorized_keys > /dev/null 2>&1
	sudo -n cp -f /root/.ssh/authorized_keys /etc/ssh/authorized_keys
	sudo -n chmod 644 /etc/ssh/authorized_keys
	
	
	# ATTENTION: DANGER: If necessary, delete !
	#sudo -n rm -f /home/user/rottenScript.sh
	
	#sudo -n -u user bash -c "cd ; cd example ; /home/user/rottenScript.sh _test"
	#sudo -n -u user bash -c "cd ; cd example ; ./example.sh --run"
}






_test_prog() {
	true
}
_main() {
	_messageNormal 'init: rotten: _main'
	
	#_start
	_start scriptLocal_mkdir_disable
	
	_collect
	
	_enter "$@"
	
	_stop
}

#__FOOTER_uk4uPhB663kVcygT0q_FOOTER__
if [[ "$1" == '_test' ]]
then
	current_deleteScriptLocal="false"
	[[ ! -e "$scriptLocal" ]] && current_deleteScriptLocal="true"
	_stop_prog() {
		[[ "$current_deleteScriptLocal" == "true" ]] && rmdir "$scriptLocal" > /dev/null 2>&1
	}
fi
if [[ "$1" == '_'* ]] && type "$1" > /dev/null 2>&1
then
	"$@"
	internalFunctionExitStatus="$?"
	return "$internalFunctionExitStatus" > /dev/null 2>&1
	exit "$internalFunctionExitStatus"
fi
if [[ "$1" != '_'* ]]
then
	_main "$@"
fi

_messageError 'FAIL: unexpected'

